From cfa970ce6ac451dac55cfcb3e0939aada31e62d8 Mon Sep 17 00:00:00 2001
From: Ikey Doherty <ikey@solus-project.com>
Date: Fri, 2 Feb 2018 11:50:49 +0000
Subject: [PATCH 2/3] Fix broken arguments

Signed-off-by: Ikey Doherty <ikey@solus-project.com>
---
 src/lib/build.c | 6 +++---
 src/lib/load.c  | 4 ++--
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/src/lib/build.c b/src/lib/build.c
index 3ad07bf..dab5a7e 100644
--- a/src/lib/build.c
+++ b/src/lib/build.c
@@ -41,14 +41,14 @@ static bool aa_hook_context_build_one(AaHookContext *self, const char *source_di
         char *command[] = {
                 NULL,    /* parser_binary path */
                 "-WQTL", /* Write cache, never load, never read cache, set cache location */
-                "--abort-on-error",      /* We need error codes */
                 (char *)self->cache_dir, /* Target cache */
                 NULL,                    /* Path to file being parsed */
+                "--abort-on-error",      /* We need error codes */
                 NULL,                    /* Terminator */
         };
 
         command[0] = (char *)self->parser_binary;
-        command[4] = path_buf;
+        command[3] = path_buf;
 
         if (aa_lsm_hook_exec_command(command) != 0) {
                 fprintf(stderr,
@@ -166,4 +166,4 @@ bool aa_hook_context_build_cache(AaHookContext *self)
  *
  * vi: set shiftwidth=8 tabstop=8 expandtab:
  * :indentSize=8:tabSize=8:noTabs=true:
- */
\ No newline at end of file
+ */
diff --git a/src/lib/load.c b/src/lib/load.c
index b699408..2f2dff4 100644
--- a/src/lib/load.c
+++ b/src/lib/load.c
@@ -31,8 +31,8 @@ bool aa_hook_context_load_cache(AaHookContext *self)
         char *command[] = {
                 NULL,                    /* parser_binary path */
                 "-rB",                   /* Replace rules, read binary input */
-                "--abort-on-error",      /* We need error codes */
                 (char *)self->cache_dir, /* Target cache */
+                "--abort-on-error",      /* We need error codes */
                 NULL,                    /* Terminator */
         };
 
@@ -77,4 +77,4 @@ bool aa_hook_context_load_cache(AaHookContext *self)
  *
  * vi: set shiftwidth=8 tabstop=8 expandtab:
  * :indentSize=8:tabSize=8:noTabs=true:
- */
\ No newline at end of file
+ */
-- 
2.16.1

